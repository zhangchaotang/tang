{"remainingRequest":"E:\\全栈\\semester_03\\semester_03\\day03\\storedes\\node_modules\\babel-loader\\lib\\index.js!E:\\全栈\\semester_03\\semester_03\\day03\\storedes\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\全栈\\semester_03\\semester_03\\day03\\storedes\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\全栈\\semester_03\\semester_03\\day03\\storedes\\src\\views\\ShoppingCart.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\全栈\\semester_03\\semester_03\\day03\\storedes\\src\\views\\ShoppingCart.vue","mtime":1573195978656},{"path":"E:\\全栈\\semester_03\\semester_03\\day03\\storedes\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\全栈\\semester_03\\semester_03\\day03\\storedes\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\全栈\\semester_03\\semester_03\\day03\\storedes\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\全栈\\semester_03\\semester_03\\day03\\storedes\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjYXJ0TGlzdDogW10sCiAgICAgIGdvb2RzTGlzdDogW10sCiAgICAgIGNoZWNrZWQ6IGZhbHNlLAogICAgICBjaGVja2VkUHJpY2U6IDAKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRDYXJ0OiBmdW5jdGlvbiBnZXRDYXJ0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5jYXJ0TGlzdCA9IEpTT04ucGFyc2Uod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0TGlzdCcpKTsKICAgICAgdmFyIGNhcnRJZHMgPSBbXTsKICAgICAgdGhpcy5jYXJ0TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgY2FydElkcy5wdXNoKGl0ZW0uaWQpOwogICAgICB9KTsKICAgICAgdGhpcy4kaHR0cC5nZXQoJy9nb29kcycsIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGdvb2RzTGlzdDogY2FydElkcwogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMuZ29vZHNMaXN0ID0gcmVzLmRhdGEuZGF0YTsKCiAgICAgICAgX3RoaXMuaXNjaGVja2VkKCk7CiAgICAgIH0pOwogICAgfSwKICAgIGlzY2hlY2tlZDogZnVuY3Rpb24gaXNjaGVja2VkKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBhbGxDaGVja3ByaWNlID0gMDsKICAgICAgdGhpcy5jYXJ0TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgIGlmIChpdGVtLmlzY2hlY2tlZCkgewogICAgICAgICAgYWxsQ2hlY2twcmljZSArPSBfdGhpczIuZ29vZHNMaXN0W2luZGV4XS5wcmljZSAqIGl0ZW0ubnVtICogMTAwOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2FydExpc3QnLCBKU09OLnN0cmluZ2lmeSh0aGlzLmNhcnRMaXN0KSk7CiAgICAgIHRoaXMuY2hlY2tlZFByaWNlID0gYWxsQ2hlY2twcmljZTsKICAgIH0sCiAgICBjaGVja0FsbDogZnVuY3Rpb24gY2hlY2tBbGwoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy5jYXJ0TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaXRlbS5pc2NoZWNrZWQgPSAhX3RoaXMzLmNoZWNrZWQ7CiAgICAgIH0pOwogICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NhcnRMaXN0JywgSlNPTi5zdHJpbmdpZnkodGhpcy5jYXJ0TGlzdCkpOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0Q2FydCgpOwogIH0KfTs="},{"version":3,"sources":["ShoppingCart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,EADA;AAEA,MAAA,SAAA,EAAA,EAFA;AAGA,MAAA,OAAA,EAAA,KAHA;AAIA,MAAA,YAAA,EAAA;AAJA,KAAA;AAMA,GARA;AASA,EAAA,OAAA,EAAA;AACA,IAAA,OADA,qBACA;AAAA;;AACA,WAAA,QAAA,GAAA,IAAA,CAAA,KAAA,CAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,UAAA,CAAA,CAAA;AACA,UAAA,OAAA,GAAA,EAAA;AACA,WAAA,QAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,OAAA,CAAA,IAAA,CAAA,IAAA,CAAA,EAAA;AACA,OAFA;AAGA,WAAA,KAAA,CACA,GADA,CACA,QADA,EACA;AACA,QAAA,MAAA,EAAA;AACA,UAAA,SAAA,EAAA;AADA;AADA,OADA,EAMA,IANA,CAMA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,SAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;;AACA,QAAA,KAAA,CAAA,SAAA;AACA,OATA;AAUA,KAjBA;AAkBA,IAAA,SAlBA,uBAkBA;AAAA;;AACA,UAAA,aAAA,GAAA,CAAA;AACA,WAAA,QAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA,KAAA,EAAA;AACA,YAAA,IAAA,CAAA,SAAA,EAAA;AACA,UAAA,aAAA,IAAA,MAAA,CAAA,SAAA,CAAA,KAAA,EAAA,KAAA,GAAA,IAAA,CAAA,GAAA,GAAA,GAAA;AACA;AACA,OAJA;AAKA,MAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,UAAA,EAAA,IAAA,CAAA,SAAA,CAAA,KAAA,QAAA,CAAA;AACA,WAAA,YAAA,GAAA,aAAA;AACA,KA3BA;AA4BA,IAAA,QA5BA,sBA4BA;AAAA;;AACA,WAAA,QAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,IAAA,CAAA,SAAA,GAAA,CAAA,MAAA,CAAA,OAAA;AACA,OAFA;AAGA,MAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,UAAA,EAAA,IAAA,CAAA,SAAA,CAAA,KAAA,QAAA,CAAA;AACA;AAjCA,GATA;AA4CA,EAAA,OA5CA,qBA4CA;AACA,SAAA,OAAA;AACA;AA9CA,CAAA","sourcesContent":["<template>\r\n  <div class=\"shoppingCart\">\r\n    <!-- 页头 -->\r\n    <van-row>\r\n      <van-nav-bar title=\"购物车\" />\r\n    </van-row>\r\n    <!-- 清单列 -->\r\n    <van-row>\r\n      <van-row class=\"cart_item\" v-for=\"(item,index) in goodsList\" :key=\"item.id\">\r\n        <van-col :span=\"2\" class=\"checkbox\">\r\n          <van-checkbox @change=\"ischecked\" v-model=\"cartList[index].ischecked\" />\r\n        </van-col>\r\n        <van-col :span=\"22\">\r\n          <van-card\r\n            :num=\"cartList[index].num\"\r\n            :price=\"item.price\"\r\n            :desc=\"item.goods_name\"\r\n            :title=\"item.goods_name\"\r\n            :thumb=\"item.image\"\r\n          >\r\n            <div slot=\"num\">\r\n              <van-stepper @change=\"ischecked\" v-model=\"cartList[index].num\" />\r\n            </div>\r\n            <div slot=\"bottom\" class=\"xiaoji\">\r\n              <span class=\"xiaoji2\">小计:</span>\r\n              &yen;{{item.price * cartList[index].num}}元\r\n            </div>\r\n          </van-card>\r\n        </van-col>\r\n      </van-row>\r\n    </van-row>\r\n    <!--合计  -->\r\n    <van-row class=\"heji\">\r\n      <van-submit-bar :price=\"checkedPrice\" button-text=\"提交订单\">\r\n        <van-checkbox v-model=\"checked\" @click=\"checkAll\">全选</van-checkbox>\r\n        <span slot=\"tip\">\r\n          你的收货地址不支持同城送,\r\n          <span>修改地址</span>\r\n        </span>\r\n      </van-submit-bar>\r\n    </van-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      cartList: [],\r\n      goodsList: [],\r\n      checked: false,\r\n      checkedPrice: 0\r\n    }\r\n  },\r\n  methods: {\r\n    getCart () {\r\n      this.cartList = JSON.parse(window.localStorage.getItem('cartList'))\r\n      let cartIds = []\r\n      this.cartList.forEach(item => {\r\n        cartIds.push(item.id)\r\n      })\r\n      this.$http\r\n        .get('/goods', {\r\n          params: {\r\n            goodsList: cartIds\r\n          }\r\n        })\r\n        .then(res => {\r\n          this.goodsList = res.data.data\r\n          this.ischecked()\r\n        })\r\n    },\r\n    ischecked () {\r\n      let allCheckprice = 0\r\n      this.cartList.forEach((item, index) => {\r\n        if (item.ischecked) {\r\n          allCheckprice += this.goodsList[index].price * item.num * 100\r\n        }\r\n      })\r\n      window.localStorage.setItem('cartList', JSON.stringify(this.cartList))\r\n      this.checkedPrice = allCheckprice\r\n    },\r\n    checkAll () {\r\n      this.cartList.forEach(item => {\r\n        item.ischecked = !this.checked\r\n      })\r\n      window.localStorage.setItem('cartList', JSON.stringify(this.cartList))\r\n    }\r\n  },\r\n  created () {\r\n    this.getCart()\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n/* 小计 */\r\n.xiaoji {\r\n  display: block;\r\n  text-align: right;\r\n  margin-top: 20px;\r\n}\r\n.xiaoji2 {\r\n  padding-right: 10px;\r\n}\r\n\r\n.checkbox {\r\n  position: relative;\r\n    left: 6px;\r\n    top: 44px;\r\n}\r\n\r\n.van-submit-bar {\r\n  margin-bottom: 50px;\r\n}\r\n\r\n.heji {\r\n  height: 84px;\r\n  margin-bottom: 50px;\r\n}\r\n.cart_item {\r\n  padding: 10px 0;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views"}]}